<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Carousel Component</title>
  </head>
  <body>
    <div class="carousel carousel-active carousel--green">
      <img src="maria.jpg" alt="Maria de Almeida photo" class="carousel-img" />
      <blockquote class="testimonial">
        <p class="testimonial-text">
          "Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem sequi
          consectetur cupiditate deserunt id rerum cumque aliquam quibusdam
          minima accusamus ex non."
        </p>
        <p class="testimonial-author">Maria de Almeida</p>
        <p class="testimonial-job">Senior Product Manager at EDP Comercial</p>
      </blockquote>

      <button class="carousel-btn btn-left">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>

      <button class="carousel-btn btn-right">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>

      <div class="dots">
        <!-- nbsp-non breaking space -->
        <button class="dot dot--filled">&nbsp;</button>
        <button class="dot">&nbsp;</button>
        <button class="dot">&nbsp;</button>
        <button class="dot">&nbsp;</button>
      </div>
    </div>

    <div class="carousel carousel--blue">
      <img src="maria.jpg" alt="Maria de Almeida photo" class="carousel-img" />
      <blockquote class="testimonial">
        <p class="testimonial-text">
          "Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem sequi
          consectetur cupiditate deserunt id rerum cumque aliquam quibusdam
          minima accusamus ex non."
        </p>
        <p class="testimonial-author">Maria de Almeida</p>
        <p class="testimonial-job">Senior Product Manager at EDP Comercial</p>
      </blockquote>

      <button class="carousel-btn btn-left">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>

      <button class="carousel-btn btn-right">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>

      <div class="dots">
        <!-- nbsp-non breaking space -->
        <button class="dot">&nbsp;</button>
        <button class="dot dot--filled">&nbsp;</button>
        <button class="dot">&nbsp;</button>
        <button class="dot">&nbsp;</button>
      </div>
    </div>

    <div class="carousel carousel--red">
      <img src="maria.jpg" alt="Maria de Almeida photo" class="carousel-img" />
      <blockquote class="testimonial">
        <p class="testimonial-text">
          "Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem sequi
          consectetur cupiditate deserunt id rerum cumque aliquam quibusdam
          minima accusamus ex non."
        </p>
        <p class="testimonial-author">Maria de Almeida</p>
        <p class="testimonial-job">Senior Product Manager at EDP Comercial</p>
      </blockquote>

      <button class="carousel-btn btn-left">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>

      <button class="carousel-btn btn-right">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>

      <div class="dots">
        <!-- nbsp-non breaking space -->
        <button class="dot">&nbsp;</button>
        <button class="dot">&nbsp;</button>
        <button class="dot dot--filled">&nbsp;</button>
        <button class="dot">&nbsp;</button>
      </div>
    </div>

    <div class="carousel carousel--yellow">
      <img src="maria.jpg" alt="Maria de Almeida photo" class="carousel-img" />
      <blockquote class="testimonial">
        <p class="testimonial-text">
          "Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem sequi
          consectetur cupiditate deserunt id rerum cumque aliquam quibusdam
          minima accusamus ex non."
        </p>
        <p class="testimonial-author">Maria de Almeida</p>
        <p class="testimonial-job">Senior Product Manager at EDP Comercial</p>
      </blockquote>

      <button class="carousel-btn btn-left">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>

      <button class="carousel-btn btn-right">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="carousel-icon"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>

      <div class="dots">
        <!-- nbsp-non breaking space -->
        <button class="dot">&nbsp;</button>
        <button class="dot">&nbsp;</button>
        <button class="dot">&nbsp;</button>
        <button class="dot dot--filled">&nbsp;</button>
      </div>
    </div>

    <script lang="javascript">
      const carousel_items = document.getElementsByClassName("carousel");
      const carousel_buttons = document.getElementsByClassName("carousel-btn");
      const dots = document.getElementsByClassName("dot");

      /* EM vez de estar hardcoded, a maneira correta seria ter um JSON com todas as imagens a inserir no carousel, e dps fazer um ciclo for
      adicionando value nas divs do carousel, e provavelmente dos botoes */

      /*

      car0 -> btn 0 e 1
      car1 -> btn 2 e 3
      car2 -> btn 4 e 5
      car3 -> btn 6 e 7

      Para os nºpares divide-se por 2. O index -1 refere-se ao anterior, pq numeros pares sao os botoes left.
      Para os nºimpares divide-se por 2 e arredonda-se as unidades. O current é o resultado deste valor, o next é o index + 1, pq numeros impares sao os botoes right.

      */

      for (let i=0; i < carousel_buttons.length; i++){
        // carousel_buttons[i].addEventListener('click', changeImage);

        carousel_buttons[i].addEventListener('click', function(event){
          if (this.classList.contains("btn-left")) {
            if (i === 0) {
              carousel_items[0].classList.remove("carousel-active");
              carousel_items[3].classList.add("carousel-active");
            } else {
              current_carousel_index = i/2;
              next_carousel_index = i/2 - 1;
              carousel_items[next_carousel_index].classList.add("carousel-active");
              carousel_items[current_carousel_index].classList.remove("carousel-active");
            }
          } else if (this.classList.contains("btn-right")) {
            if (i === 7) {
              carousel_items[3].classList.remove("carousel-active");
              carousel_items[0].classList.add("carousel-active");
            } else {
              current_carousel_index = Math.floor(i/2);
              next_carousel_index = Math.floor(i/2) + 1;
              carousel_items[next_carousel_index].classList.add("carousel-active");
              carousel_items[current_carousel_index].classList.remove("carousel-active");
            }
          }
        });
      }
    </script>
  </body>
</html>
